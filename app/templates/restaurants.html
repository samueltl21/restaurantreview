{% extends "base.html" %}

{% block title %}Restaurants - RestaurantReview{% endblock %}

{% block content %}
<!-- Hero Banner with Login/Signup -->
<div class="position-relative">
    <img src="{{ url_for('static', filename='images/home-food.jpg') }}" class="img-fluid banner-blur" alt="Food Banner">

    <div class="home-title text-center text-white position-absolute top-50 start-50 translate-middle">
        <h1 class="display-4">Discover Best Restaurants in Perth</h1>
        <p class="lead">Taste it. Rate it. Share it.</p>
        {% if 'user_id' not in session %}
        <a href="{{ url_for('login') }}" class="btn btn-login">Login</a>
        <a href="{{ url_for('sign_up') }}" class="btn btn-register">Sign Up</a>
        {% endif %}
    </div>
</div>

<!-- Section Start -->
<div class="section-wrapper-custom">

    <!-- Top Trending -->
    <h2 class="restaurant-title">🌟 Trending Right Now</h2>
    <div class="top-section-custom">
        {% for restaurant, avg_rating in top_restaurants %}
        <div class="top-card-custom">
            <img src="{{ url_for('static', filename='images/image.jpg') }}" alt="{{ restaurant.name }}">
            <p class="mt-2 mb-0"><strong>{{ restaurant.name }}</strong></p>
            <p class="caption">{{ avg_rating }} ⭐ average</p>
        </div>
        {% endfor %}
    </div>


    <!-- Categorized Restaurant Lists -->
    <h4 class="restaurant-subtitle">🍴 Explore More Restaurants by Category</h4>

    <!-- Grouped Restaurants -->
    {% for cuisine, restaurants in grouped_restaurants.items() %}
    <h5 class="restaurant-category">{{ cuisine }} Cuisine</h5>
    <div class="restaurant-columns-custom">
        {% for r, rating in restaurants %}
        <div class="restaurant-item-custom">
            {{ r.name }}<br>
            <span class="stars">
                {{ "⭐" * rating|int }} {% if rating > 0 %}({{ rating }}){% endif %}
            </span>
        </div>
        {% endfor %}
    </div>
    {% endfor %}
</div>
{% endblock %}