{% extends "base.html" %} {% block title %}Analytics | RestaurantReview{%
endblock %} {% block content %}
<div class="container mt-5">
  <h2 class="text-center mb-4">Your Restaurant Review Analytics</h2>

  {% if not cuisine_labels %}
  <div class="alert alert-info text-center">
    <p>
      You haven't uploaded any reviews yet. Please add some reviews to see your
      analytics.
    </p>
    <a href="{{ url_for('upload_reviews') }}" class="btn btn-primary mt-2"
      >Upload Reviews</a
    >
  </div>
  {% else %}
  <div class="row">
    <!-- Left Chart: Cuisine Preference -->
    <div class="col-md-6">
      <div class="card shadow">
        <div class="card-header bg-primary text-white">
          <h5 class="mb-0">Cuisine Preference</h5>
        </div>
        <div class="card-body">
          <canvas id="cuisineChart" height="300"></canvas>
        </div>
      </div>
    </div>

    <!-- Right Chart: Average Spend per Cuisine -->
    <div class="col-md-6">
      <div class="card shadow">
        <div class="card-header bg-success text-white">
          <h5 class="mb-0">Average Spend per Cuisine</h5>
        </div>
        <div class="card-body">
          <canvas id="spendChart" height="300"></canvas>
        </div>
      </div>
    </div>
  </div>
  {% endif %}
</div>

<!-- Chart.js CDN -->
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>

<!-- Pass dynamic data to JS -->
<script>
  const cuisineLabels = {{ cuisine_labels | tojson }};
  const cuisineValues = {{ cuisine_values | tojson }};
  const spendLabels = {{ avg_spend_labels | tojson }};
  const spendValues = {{ avg_spend_values | tojson }};
</script>

<!-- External JS logic -->
<script src="{{ url_for('static', filename='script.js') }}"></script>
{% endblock %}
