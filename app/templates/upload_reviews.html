{% extends "base.html" %} {% block title %}Upload & Rate | RestaurantReview{%
endblock %} {% block content %}
<div class="container mt-5">
  <div class="row justify-content-center">

    <!-- Rate Restaurant Form (Right) -->
    <div class="col-md-6">
      <h3>Rate a Restaurant</h3>
      <form method="POST" enctype="multipart/form-data" id="review-form">
        {{ form.hidden_tag() }}

        <!-- Restaurant Name (Always visible) -->
        <div class="mb-3 position-relative">
          {{ form.restaurant.label }}
          {{ form.restaurant(class="form-control", id="restaurant-name", autocomplete="off") }}
          <div class="form-text text-muted">
            It will automatically check if the restaurant already exists in the database or not.
          </div>
          <div id="restaurant-suggestions" class="list-group position-absolute w-100" style="z-index:1050;"></div>
          <div id="restaurant-check-result" class="form-text mt-1"></div>
        </div>


        <!-- These will appear only if restaurant is NOT found -->
        <div id="restaurant-info-section" style="display: none;">
          <div class="mb-3">
            {{ form.location.label }}<br>
            {{ form.location(class="form-control", id="location") }}
          </div>
          <div class="mb-3">
            {{ form.cuisine.label }}<br>
            {{ form.cuisine(class="form-select", id="cuisine") }}
          </div>
        </div>

        <!-- Review fields (appear after checking name) -->
        <div id="review-fields-section" style="display: none;">
          <div class="mb-3">
            {{ form.date.label }}<br>
            {{ form.date(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ form.rating.label }}<br>
            {{ form.rating(class="form-select") }}
          </div>
          <div class="mb-3">
            {{ form.spend.label }}<br>
            {{ form.spend(class="form-control") }}
          </div>
          <div class="mb-3">
            {{ form.review_image.label }}
            {{ form.review_image(class="form-control") }}
            <div class="form-text text-muted">Optional: Upload a photo of the dish or restaurant.</div>
          </div>
          <div class="mb-3">
            {{ form.comment.label }}<br>
            {{ form.comment(class="form-control", rows=3) }}
          </div>
          <div class="center-container">
            {{ form.submit(class="btn btn-shared") }}
          </div>
        </div>
      </form>
    </div>
  </div>
</div>
{% endblock %}
